def collect_compliance_data(conformance_packs):
    """
    Collect compliance data from all conformance packs for HTML report generation.
    
    Args:
        conformance_packs: List of conformance pack names to process
        
    Returns:
        Dictionary with compliance data organized by pillar and best practice
    """
    compliance_data = {}
    
    for conformance_pack_name in conformance_packs:
        # Extract pillar name for this conformance pack
        pillar_name = None
        for prefix, pillar_id in PILLAR_MAPPING.items():
            if prefix in conformance_pack_name:
                if pillar_id == 'security':
                    pillar_name = 'Security'
                elif pillar_id == 'reliability':
                    pillar_name = 'Reliability'
                elif pillar_id == 'costOptimization':
                    pillar_name = 'Cost Optimization'
                break
        
        if not pillar_name:
            logger.warning(f"Could not determine pillar name for conformance pack: {conformance_pack_name}")
            continue
            
        # Initialize pillar data if not exists
        if pillar_name not in compliance_data:
            compliance_data[pillar_name] = {}
            
        # Get conformance pack rules
        rules = get_conformance_pack_details(conformance_pack_name)
        
        for rule in rules:
            rule_name = rule.get('ConfigRuleName')
            compliance_type = rule.get('Compliance', {}).get('ComplianceType')
            
            # Extract best practice ID from rule name (e.g., SEC01, REL02)
            best_practice_id = None
            for prefix in ['SEC', 'REL', 'COST']:
                if prefix in rule_name:
                    # Find the position of the prefix
                    idx = rule_name.find(prefix)
                    # Extract the prefix and the following digits
                    potential_id = rule_name[idx:idx+5]  # Assuming format like SEC01
                    if potential_id[3:].isdigit():
                        best_practice_id = potential_id
                        break
            
            if not best_practice_id:
                logger.warning(f"Could not extract best practice ID from rule name: {rule_name}")
                continue
                
            # Initialize best practice data if not exists
            if best_practice_id not in compliance_data[pillar_name]:
                compliance_data[pillar_name][best_practice_id] = {
                    'title': f"Best Practice {best_practice_id}",
                    'resources': []
                }
                
            # Get rule details including resources
            evaluation_results = get_rule_details(rule_name)
            
            for result in evaluation_results:
                resource_type = result.get('EvaluationResultIdentifier', {}).get('EvaluationResultQualifier', {}).get('ResourceType')
                resource_id = result.get('EvaluationResultIdentifier', {}).get('EvaluationResultQualifier', {}).get('ResourceId')
                resource_compliance = result.get('ComplianceType')
                
                compliance_data[pillar_name][best_practice_id]['resources'].append({
                    'resource_type': resource_type,
                    'resource_id': resource_id,
                    'compliance_status': resource_compliance
                })
    
    return compliance_data
